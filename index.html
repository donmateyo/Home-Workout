<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dumbbell Workout Tracker</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0080FF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Dumbbell Tracker">
    <meta name="description" content="Science-backed dumbbell workout tracker with timer and progress tracking">
    
    <!-- App Icons -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzAwODBGRiIvPgo8cGF0aCBkPSJNOCAxNkg4LjVWMTdIOFYxNloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yNCAxNkgyNC41VjE3SDI0VjE2WiIgZmlsbD0id2hpdGUiLz4KPHJlY3QgeD0iNiIgeT0iMTIiIHdpZHRoPSI0IiBoZWlnaHQ9IjgiIHJ4PSIyIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIyMiIgeT0iMTIiIHdpZHRoPSI0IiBoZWlnaHQ9IjgiIHJ4PSIyIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIxMCIgeT0iMTQuNSIgd2lkdGg9IjEyIiBoZWlnaHQ9IjMiIHJ4PSIxLjUiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9IiMwMDgwRkYiLz4KPHBhdGggZD0iTTQ1IDkwSDUwVjk1SDQ1VjkwWiIgZmlsbD0id2hpdGUiLz4KPHA9dGggZD0iTTEzNSA5MEgxNDBWOTVIMTM1VjkwWiIgZmlsbD0id2hpdGUiLz4KPHJlY3QgeD0iMzAiIHk9IjY1IiB3aWR0aD0iMzAiIGhlaWdodD0iNTAiIHJ4PSIxNSIgZmlsbD0id2hpdGUiLz4KPHJlY3QgeD0iMTIwIiB5PSI2NSIgd2lkdGg9IjMwIiBoZWlnaHQ9IjUwIiByeD0iMTUiIGZpbGw9IndoaXRlIi8+CjxyZWN0IHg9IjYwIiB5PSI4MiIgd2lkdGg9IjYwIiBoZWlnaHQ9IjE2IiByeD0iOCIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==">
    
    <!-- Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkR1bWJiZWxsIFdvcmtvdXQgVHJhY2tlciIsCiAgInNob3J0X25hbWUiOiAiRHVtYmJlbGwgVHJhY2tlciIsCiAgImRlc2NyaXB0aW9uIjogIlNjaWVuY2UtYmFja2VkIGR1bWJiZWxsIHdvcmtvdXQgdHJhY2tlciB3aXRoIHRpbWVyIGFuZCBwcm9ncmVzcyB0cmFja2luZyIsCiAgInN0YXJ0X3VybCI6ICIuLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiI2ZmZmZmZiIsCiAgInRoZW1lX2NvbG9yIjogIiMwMDgwRkYiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVGt5SWlCb1pXbG5hSFE5SWpFNU1pSWdkbWxsZDBKdmVEMGlNQ0F3SURFNU1pQXhPVElpSUdacGJHdzlJbTV2Ym1VaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK0NqeHlaV04wSUhkcFpIUm9QU0l4T1RJaUlHaGxhV2RvZEQwaU1Ua3lJaUJ5ZUQwaU5EQWlJR1pwYkd3OUlpTXdNRGd3UmtZaUx6NEtQSEJoZEdnZ1pEMGlUVFExSURrd1NEVXdWamt4Tms0ME5TQTVNSHBOTVRNMUlEa3dTREUwTUZZNU5VZ3hNelUyT1Rsei1JMEF5SJJJT04yODBmbWNaZENaRFBTSjNhR2wwWlNJdlBnbzhZbkpoZEdnZ1JEMGlUVE13SURRZ05qVWdPVEFnT0hBZ05UQWdObTR5SURFeElIVTJNZ2xyTE1BNElDQTVNazVpSXpRZ09URWlJQ0F5T1NBZ09UQWlMRzV2THg0S1BuQmhkR2dnWkQwaVRURXlNQ0EwSURZMUlEa3dJRTR4TkRBZ09UVGRKVEU0TkNBNEkwOUNMLFVxYStGZ2psZzZaUT09IiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWdkbWxsZDBKdmVEMGlNQ0F3SURVMU1pQTFNVElpSUdacGJHdzlJbTV2Ym1VaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK0NqeHlaV04wSUhkcFpIUm9QU0kxTVRJaUlHaGxhV2RvZEQwaU5URXlJaUJ5ZUQwaU9EQWlJR1pwYkd3OUlpTXdNRGd3UmtZaUx6NEtQSEJoZEdnZ1pEMGlUVEV5TUNBelNERTFNRVkxUlVneE1UZzNCRGdxT0c9SURNOFJ0T2VCZ1BDZ1pTVTNpT1NRalI1RTArQ2p4d1lYUm9JR1E5SWsweU9EZ3VOVE0wSURJek1TNDJOems0SURNeU1TODVRelEzTGpSMU9UWkVNalF4TGpZM09UQUJER1FrYVRrMElndjBFb2RDbTFnSUdacGJHdzlJbmRvYVhSbElpOCtDbngwWlhoMElIZzlJakV5TUNBdE9EQWlJSGs5SWpFeE1DSWdaVFpoYkdsc2JpMWlaWE5sYkdsdVpUMGliV2xrWkd4bElpQjBaWGgwTFdGdVkyaHZjajBpYzNSaGNuUWlJR1pwYkd3OUluZG9hWFJsSWo0OEFUNUFCMFNWNHhZUW9zbDB4YUZoOExrTW1DbHJJQ3cyCy8vODBRaWFqeFM4VXpOb1dqMVNYWXJhakNEWDMnSlRGZ1czY0V1emVTNy84TXhOTStnKys9PUMva1dQUGl0OHo4UTgrYUNqZGhZT1ZFNU1qVHNKK0FGNDE5VllEcGMxSDRBOFlTeDMyZ0Q0UDFjNmJ0Y3Z6WEsyQT09IgoKa2lWVXE4ZUUxZUF5Z0Y3a3g5NkFpcER5MVVIQ1E5ejg9CiU9Qi8yb0Q3NllnbmRWUUlCOUZZMTNPVCtGMFF1KzhZKzVyVExoOUZCRFlYT1h6aFcvZ3V0T0NiZ280YlNEWld1V0dVblEySHV3TXhEL2ltMSVBU2VXemdhWjd5dXVqNjI3bjRieG8wZSttTXc4WUdsSm8vSFpUSzIxRm0rWERRUTljZGF1Nk1mbE9DY0FHK1VJVkJSVlFIWDdEWUEraE85ZE1PZHJjUXNBbGd6QmdHZWFyeWQyOW1CMFhMY3d1aUV6K05jaGNLay8yczJXYmo0Z0tLOE41SDhha3c5PSIKCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdLAogICJjYXRlZ29yaWVzIjogWyJoZWFsdGgiLCAiZml0bmVzcyJdLAogICJvcmllbnRhdGlvbiI6ICJwb3J0cmFpdCIsCiAgImRpcmVjdGlvbiI6ICJsdHIiLAogICJsYW5nIjogImVuIgp9">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0080FF',
                        'primary-dark': '#0066CC',
                        'electric-green': '#00FF41',
                        'electric-green-dark': '#00CC33'
                    }
                }
            }
        }
    </script>
    <style>
        .exercise-card {
            transition: all 0.3s ease;
        }
        .exercise-card:hover {
            transform: translateY(-2px);
        }
        .timer-ring {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        @keyframes pulse-gentle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .pulse-gentle {
            animation: pulse-gentle 2s infinite;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white min-h-full">
    <!-- Header -->
    <header class="bg-primary dark:bg-primary-dark text-white shadow-lg">
        <div class="max-w-6xl mx-auto px-4 py-3">
            <h1 class="text-xl font-bold text-center">üèãÔ∏è Dumbbell Tracker</h1>
        </div>
    </header>

    <!-- Main Container -->
    <div class="max-w-6xl mx-auto px-4 py-3">
        <!-- Program Selection -->
        <div class="flex flex-col sm:flex-row gap-2 mb-4">
            <button id="program1Btn" class="flex-1 bg-primary text-white py-2 px-4 rounded-lg font-semibold transition-all hover:bg-primary-dark text-sm">
                Program 1: Full-Body
            </button>
            <button id="program2Btn" class="flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg font-semibold transition-all hover:bg-gray-300 dark:hover:bg-gray-600 text-sm">
                Program 2: PPL
            </button>
        </div>

        <!-- Program 2 Day Selection -->
        <div id="pplDaySelection" class="hidden mb-4">
            <div class="flex flex-col sm:flex-row gap-2">
                <button class="ppl-day-btn flex-1 bg-gray-100 dark:bg-gray-800 py-2 px-3 rounded-lg transition-all hover:bg-gray-200 dark:hover:bg-gray-700 text-sm" data-day="push">
                    Push
                </button>
                <button class="ppl-day-btn flex-1 bg-gray-100 dark:bg-gray-800 py-2 px-3 rounded-lg transition-all hover:bg-gray-200 dark:hover:bg-gray-700 text-sm" data-day="pull">
                    Pull
                </button>
                <button class="ppl-day-btn flex-1 bg-gray-100 dark:bg-gray-800 py-2 px-3 rounded-lg transition-all hover:bg-gray-200 dark:hover:bg-gray-700 text-sm" data-day="legs">
                    Legs
                </button>
            </div>
        </div>

        <!-- Workout Controls & Timer Row -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
            <!-- Workout Controls -->
            <div class="flex gap-2">
                <button id="startWorkoutBtn" class="flex-1 bg-electric-green text-black py-2 px-4 rounded-lg font-semibold transition-all hover:bg-electric-green-dark text-sm">
                    <i data-feather="play" class="inline w-4 h-4 mr-1"></i>Start
                </button>
                <button id="stopWorkoutBtn" class="hidden flex-1 bg-red-500 text-white py-2 px-4 rounded-lg font-semibold transition-all hover:bg-red-600 text-sm">
                    <i data-feather="square" class="inline w-4 h-4 mr-1"></i>Stop
                </button>
                <button id="resetProgressBtn" class="bg-gray-500 text-white py-2 px-3 rounded-lg font-semibold transition-all hover:bg-gray-600">
                    <i data-feather="refresh-cw" class="w-4 h-4"></i>
                </button>
            </div>

            <!-- Compact Timer -->
            <div id="timerDisplay" class="hidden bg-gray-100 dark:bg-gray-800 rounded-lg p-3">
                <div class="flex items-center gap-3">
                    <div class="relative w-16 h-16 flex-shrink-0">
                        <svg class="w-16 h-16" viewBox="0 0 120 120">
                            <circle cx="60" cy="60" r="54" fill="none" stroke="currentColor" stroke-width="8" class="text-gray-300 dark:text-gray-600"></circle>
                            <circle id="timerCircle" cx="60" cy="60" r="54" fill="none" stroke="currentColor" stroke-width="8" class="text-primary timer-ring" stroke-dasharray="339.292" stroke-dashoffset="339.292" stroke-linecap="round"></circle>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="timerText" class="text-sm font-bold">0:00</span>
                        </div>
                    </div>
                    <div class="flex-1 space-y-2">
                        <div class="flex gap-1">
                            <button id="timer45Btn" class="bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600">45s</button>
                            <button id="timer60Btn" class="bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600">60s</button>
                            <button id="timer90Btn" class="bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600">90s</button>
                            <button id="timer120Btn" class="bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600">2m</button>
                        </div>
                        <div class="flex gap-1 items-center">
                            <input type="number" id="customTimer" placeholder="Sec" min="1" max="600" class="w-12 px-1 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-center">
                            <button id="startCustomTimer" class="bg-electric-green text-black px-2 py-1 rounded text-xs hover:bg-electric-green-dark">Start</button>
                            <button id="pauseTimer" class="bg-yellow-500 text-white px-2 py-1 rounded text-xs hover:bg-yellow-600">Pause</button>
                            <button id="timerStopBtn" class="bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600">Stop</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Compact Progress -->
        <div id="workoutProgress" class="hidden bg-gradient-to-r from-green-100 to-blue-100 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg p-3 mb-4" style="background: linear-gradient(to right, rgba(0, 255, 65, 0.1), rgba(0, 128, 255, 0.1));">
            <div class="flex items-center gap-4 mb-2">
                <div class="flex-1">
                    <div class="bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                        <div id="progressBar" class="h-2 rounded-full progress-bar" style="width: 0%; background: linear-gradient(to right, #00FF41, #0080FF);"></div>
                    </div>
                </div>
                <span id="progressText" class="text-xs font-medium">0/6 exercises</span>
            </div>
            <div class="grid grid-cols-4 gap-2 text-xs">
                <div class="text-center">
                    <div class="text-lg font-bold" style="color: #00FF41;" id="completedSets">0</div>
                    <div class="text-gray-600 dark:text-gray-400">Sets</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-600" id="workoutTime">00:00</div>
                    <div class="text-gray-600 dark:text-gray-400">Time</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-600" id="currentExercise">-</div>
                    <div class="text-gray-600 dark:text-gray-400">Current</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-600" id="totalVolume">0</div>
                    <div class="text-gray-600 dark:text-gray-400">Volume</div>
                </div>
            </div>
        </div>

        <!-- Exercises Grid -->
        <div id="exerciseGrid" class="grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4">
            <!-- Exercises will be populated here -->
        </div>

        <!-- Collapsible Program Info -->
        <div id="programInfo" class="bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden">
            <button id="toggleProgramInfo" class="w-full text-left p-3 font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                üìñ Program Details <span id="toggleIcon">‚ñº</span>
            </button>
            <div id="programDetails" class="hidden p-3 pt-0 border-t border-gray-200 dark:border-gray-700"></div>
        </div>
    </div>

    <!-- Exercise Detail Modal -->
    <div id="exerciseModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                    <h2 id="modalTitle" class="text-2xl font-bold"></h2>
                    <button id="closeModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i data-feather="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <script>
        // Dark mode setup
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Initialize Feather icons
        feather.replace();

        // Workout data
        const workoutData = {
            program1: {
                name: "Full-Body Routine",
                warmup: [
                    { name: "Cat-Cow Stretch", reps: "5 reps" },
                    { name: "World's Greatest Stretch", reps: "3/side" },
                    { name: "Bodyweight Squats", reps: "15 reps" },
                    { name: "Light Dumbbell Deadlifts", reps: "2 √ó 10 reps (25 lb)" }
                ],
                exercises: [
                    { 
                        name: "Dumbbell Goblet Squat", 
                        sets: 3, 
                        reps: "8-12", 
                        weight: "35 lb", 
                        focus: "Quads, glutes, core",
                        description: "Hold a dumbbell close to your chest and squat down until thighs are parallel to the floor."
                    },
                    { 
                        name: "Dumbbell Romanian Deadlift", 
                        sets: 3, 
                        reps: "10-12", 
                        weight: "35 lb", 
                        focus: "Hamstrings, glutes",
                        description: "Keep dumbbells close to your body as you hinge at the hips and lower with a straight back."
                    },
                    { 
                        name: "One-Arm Dumbbell Row", 
                        sets: 3, 
                        reps: "8-12/side", 
                        weight: "35 lb", 
                        focus: "Lats, traps, biceps",
                        description: "Support yourself with one hand on a bench and row the dumbbell to your hip with the opposite arm."
                    },
                    { 
                        name: "Dumbbell Bench Press", 
                        sets: 3, 
                        reps: "8-12", 
                        weight: "25-35 lb", 
                        focus: "Chest, triceps",
                        description: "Lie on bench or floor and press dumbbells up and together, squeezing chest at the top."
                    },
                    { 
                        name: "Dumbbell Overhead Press", 
                        sets: 3, 
                        reps: "6-10", 
                        weight: "25-35 lb", 
                        focus: "Shoulders, triceps",
                        description: "Press dumbbells overhead from shoulder height, keeping core tight and avoiding back arch."
                    },
                    { 
                        name: "Dumbbell Side Plank Row", 
                        sets: 3, 
                        reps: "8-10/side", 
                        weight: "25 lb", 
                        focus: "Core, obliques, anti-rotation",
                        description: "Hold side plank position and row dumbbell from the floor to your hip, maintaining plank throughout."
                    }
                ]
            },
            program2: {
                push: {
                    name: "Push Day (Chest, Shoulders, Triceps)",
                    exercises: [
                        { name: "Dumbbell Bench Press", sets: "3-4", reps: "8-12", weight: "25-35 lb", focus: "Chest, triceps", description: "Lie on bench and press dumbbells up and together, focusing on chest contraction." },
                        { name: "Dumbbell Overhead Press", sets: "3-4", reps: "8-10", weight: "25-35 lb", focus: "Shoulders, triceps", description: "Press dumbbells overhead from shoulder height with controlled movement." },
                        { name: "Dumbbell Arnold Press", sets: 3, reps: "10-12", weight: "25 lb", focus: "Shoulders", description: "Start with palms facing you, rotate to palms forward as you press overhead." },
                        { name: "Dumbbell Lateral Raise", sets: 3, reps: "12-15", weight: "25 lb", focus: "Side delts", description: "Raise dumbbells to the side until arms are parallel to the floor." },
                        { name: "Dumbbell Overhead Triceps Extension", sets: 3, reps: "10-12", weight: "25 lb", focus: "Triceps", description: "Hold dumbbell overhead and lower behind head by bending only at elbows." }
                    ]
                },
                pull: {
                    name: "Pull Day (Back, Biceps, Rear Delts)",
                    exercises: [
                        { name: "One-Arm Dumbbell Row", sets: "3-4", reps: "8-12/side", weight: "35 lb", focus: "Lats, rhomboids", description: "Support yourself and row dumbbell to hip, squeezing shoulder blades together." },
                        { name: "Dumbbell Reverse Fly", sets: 3, reps: "12-15", weight: "25 lb", focus: "Rear delts", description: "Bend forward and raise dumbbells to the side, squeezing shoulder blades." },
                        { name: "Dumbbell Hammer Curl", sets: 3, reps: "10-12", weight: "25 lb", focus: "Biceps, forearms", description: "Keep palms neutral and curl dumbbells up with control." },
                        { name: "Dumbbell Concentration Curl", sets: 3, reps: "10-12", weight: "25 lb", focus: "Biceps peak", description: "Sit and curl with elbow braced against inner thigh for isolation." },
                        { name: "Dumbbell Shrug", sets: 3, reps: "12-15", weight: "35 lb", focus: "Traps", description: "Lift shoulders straight up towards ears, hold briefly, then lower." }
                    ]
                },
                legs: {
                    name: "Legs Day (Quads, Hamstrings, Glutes)",
                    exercises: [
                        { name: "Dumbbell Goblet Squat", sets: "3-4", reps: "8-12", weight: "35 lb", focus: "Quads, glutes", description: "Hold dumbbell at chest and squat with good depth and control." },
                        { name: "Dumbbell Romanian Deadlift", sets: "3-4", reps: "10-12", weight: "35 lb", focus: "Hamstrings, glutes", description: "Hinge at hips and lower dumbbells while keeping back straight." },
                        { name: "Dumbbell Step-Up", sets: 3, reps: "10-12/leg", weight: "25-35 lb", focus: "Quads, glutes", description: "Step up onto box/bench, focusing on the working leg doing the work." },
                        { name: "Dumbbell Bulgarian Split Squat", sets: 3, reps: "8-10/leg", weight: "25-35 lb", focus: "Quads, glutes", description: "Rear foot elevated, lower front leg into lunge position." },
                        { name: "Standing Dumbbell Calf Raise", sets: 3, reps: "15-20", weight: "35 lb", focus: "Calves", description: "Rise up on toes, hold briefly, then lower with control." }
                    ]
                }
            }
        };

        // App state
        let currentProgram = 'program1';
        let currentDay = null;
        let isWorkoutActive = false;
        let workoutStartTime = null;
        let timerInterval = null;
        let workoutTimer = null;
        let currentTimerDuration = 0;
        let exerciseProgress = {};

        // DOM elements
        const program1Btn = document.getElementById('program1Btn');
        const program2Btn = document.getElementById('program2Btn');
        const pplDaySelection = document.getElementById('pplDaySelection');
        const startWorkoutBtn = document.getElementById('startWorkoutBtn');
        const stopWorkoutBtn = document.getElementById('stopWorkoutBtn');
        const resetProgressBtn = document.getElementById('resetProgressBtn');
        const timerDisplay = document.getElementById('timerDisplay');
        const workoutProgress = document.getElementById('workoutProgress');
        const exerciseGrid = document.getElementById('exerciseGrid');
        const programInfo = document.getElementById('programInfo');
        const exerciseModal = document.getElementById('exerciseModal');

        // Event listeners
        program1Btn.addEventListener('click', () => selectProgram('program1'));
        program2Btn.addEventListener('click', () => selectProgram('program2'));
        startWorkoutBtn.addEventListener('click', startWorkout);
        stopWorkoutBtn.addEventListener('click', stopWorkout);
        resetProgressBtn.addEventListener('click', resetProgress);
        document.getElementById('closeModal').addEventListener('click', closeModal);
        document.getElementById('timer45Btn').addEventListener('click', () => startTimer(45));
        document.getElementById('timer60Btn').addEventListener('click', () => startTimer(60));
        document.getElementById('timer90Btn').addEventListener('click', () => startTimer(90));
        document.getElementById('timer120Btn').addEventListener('click', () => startTimer(120));
        document.getElementById('startCustomTimer').addEventListener('click', startCustomTimer);
        document.getElementById('pauseTimer').addEventListener('click', pauseTimer);
        document.getElementById('timerStopBtn').addEventListener('click', stopTimer);

        // PPL day buttons
        document.querySelectorAll('.ppl-day-btn').forEach(btn => {
            btn.addEventListener('click', () => selectPPLDay(btn.dataset.day));
        });

        // Toggle program info
        document.getElementById('toggleProgramInfo').addEventListener('click', () => {
            const details = document.getElementById('programDetails');
            const icon = document.getElementById('toggleIcon');
            
            if (details.classList.contains('hidden')) {
                details.classList.remove('hidden');
                icon.textContent = '‚ñ≤';
            } else {
                details.classList.add('hidden');
                icon.textContent = '‚ñº';
            }
        });

        function selectProgram(program) {
            currentProgram = program;
            
            // Update button styles
            if (program === 'program1') {
                program1Btn.className = "flex-1 bg-primary text-white py-2 px-4 rounded-lg font-semibold transition-all hover:bg-primary-dark text-sm";
                program2Btn.className = "flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg font-semibold transition-all hover:bg-gray-300 dark:hover:bg-gray-600 text-sm";
                pplDaySelection.classList.add('hidden');
                currentDay = null;
            } else {
                program2Btn.className = "flex-1 bg-primary text-white py-2 px-4 rounded-lg font-semibold transition-all hover:bg-primary-dark text-sm";
                program1Btn.className = "flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg font-semibold transition-all hover:bg-gray-300 dark:hover:bg-gray-600 text-sm";
                pplDaySelection.classList.remove('hidden');
            }
            
            renderExercises();
            renderProgramInfo();
        }

        function selectPPLDay(day) {
            currentDay = day;
            
            // Update PPL day button styles
            document.querySelectorAll('.ppl-day-btn').forEach(btn => {
                if (btn.dataset.day === day) {
                    btn.className = "ppl-day-btn flex-1 bg-primary text-white py-2 px-3 rounded-lg transition-all text-sm";
                } else {
                    btn.className = "ppl-day-btn flex-1 bg-gray-100 dark:bg-gray-800 py-2 px-3 rounded-lg transition-all hover:bg-gray-200 dark:hover:bg-gray-700 text-sm";
                }
            });
            
            renderExercises();
        }

        function getCurrentExercises() {
            if (currentProgram === 'program1') {
                return workoutData.program1.exercises;
            } else if (currentDay) {
                return workoutData.program2[currentDay].exercises;
            }
            return [];
        }

        function renderExercises() {
            const exercises = getCurrentExercises();
            
            exerciseGrid.innerHTML = exercises.map((exercise, index) => {
                const progress = exerciseProgress[index] || { completedSets: 0, weight: parseFloat(exercise.weight) || 0 };
                const isCompleted = progress.completedSets >= (parseInt(exercise.sets) || 3);
                
                return `
                    <div class="exercise-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 ${isCompleted ? 'ring-2 ring-electric-green' : ''} ${isWorkoutActive ? 'hover:shadow-xl' : ''}">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-base font-bold text-gray-900 dark:text-white leading-tight">${exercise.name}</h3>
                            <button class="text-gray-500 hover:text-primary transition-colors flex-shrink-0 ml-2" onclick="showExerciseDetails(${index})">
                                <i data-feather="info" class="w-4 h-4"></i>
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-3 gap-3 mb-3 text-center">
                            <div>
                                <div class="text-lg font-bold text-primary">${exercise.sets}</div>
                                <div class="text-xs text-gray-600 dark:text-gray-400">Sets</div>
                            </div>
                            <div>
                                <div class="text-lg font-bold text-blue-600">${exercise.reps}</div>
                                <div class="text-xs text-gray-600 dark:text-gray-400">Reps</div>
                            </div>
                            <div>
                                <div class="text-lg font-bold text-green-600">${progress.weight}lb</div>
                                <div class="text-xs text-gray-600 dark:text-gray-400">Weight</div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="flex items-center justify-between mb-1">
                                <div class="text-xs text-gray-600 dark:text-gray-400">${exercise.focus}</div>
                                <div class="text-xs text-gray-600 dark:text-gray-400">${progress.completedSets}/${exercise.sets}</div>
                            </div>
                            <div class="bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: ${(progress.completedSets / (parseInt(exercise.sets) || 3)) * 100}%"></div>
                            </div>
                        </div>
                        
                        ${isWorkoutActive ? `
                            <div class="space-y-2">
                                <button class="w-full bg-electric-green text-black py-2 px-3 rounded-lg hover:bg-electric-green-dark transition-all font-semibold text-sm" onclick="completeSet(${index})">
                                    ${isCompleted ? '‚úì Complete' : 'Complete Set'}
                                </button>
                                <div class="flex gap-2 items-center">
                                    <input type="number" 
                                           id="weight-${index}" 
                                           value="${progress.weight}" 
                                           min="0" 
                                           step="2.5" 
                                           class="w-16 px-2 py-1 text-base border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent text-center"
                                           onchange="updateWeight(${index}, this.value)">
                                    <div class="flex gap-1 flex-1">
                                        <button class="flex-1 bg-gray-500 text-white py-1 px-1 rounded text-xs hover:bg-gray-600 transition-all" onclick="quickWeight(${index}, 20)">20</button>
                                        <button class="flex-1 bg-gray-500 text-white py-1 px-1 rounded text-xs hover:bg-gray-600 transition-all" onclick="quickWeight(${index}, 25)">25</button>
                                        <button class="flex-1 bg-gray-500 text-white py-1 px-1 rounded text-xs hover:bg-gray-600 transition-all" onclick="quickWeight(${index}, 30)">30</button>
                                        <button class="flex-1 bg-gray-500 text-white py-1 px-1 rounded text-xs hover:bg-gray-600 transition-all" onclick="quickWeight(${index}, 35)">35</button>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
            
            feather.replace();
        }

        function renderProgramInfo() {
            const details = document.getElementById('programDetails');
            
            if (currentProgram === 'program1') {
                details.innerHTML = `
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-lg mb-3">Warm-Up (5-7 min)</h4>
                            <ul class="space-y-2">
                                ${workoutData.program1.warmup.map(item => `
                                    <li class="flex justify-between">
                                        <span>${item.name}</span>
                                        <span class="text-gray-600 dark:text-gray-400">${item.reps}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg mb-3">Progression Plan</h4>
                            <ul class="space-y-2 text-sm">
                                <li><strong>Weeks 1-3:</strong> Focus on perfect form</li>
                                <li><strong>Weeks 4-6:</strong> Increase reps to top range</li>
                                <li><strong>Weeks 7+:</strong> Add 4th set or slow tempo</li>
                                <li><strong>Rest:</strong> 60-90s strength, 30-45s conditioning</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                details.innerHTML = `
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-lg mb-3">Format</h4>
                            <ul class="space-y-2 text-sm">
                                <li>‚Ä¢ Rotate through Push ‚Üí Pull ‚Üí Legs</li>
                                <li>‚Ä¢ 3-4 sets per exercise</li>
                                <li>‚Ä¢ 8-12 reps for strength/hypertrophy</li>
                                <li>‚Ä¢ Rest 60-90 seconds between sets</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg mb-3">Progression Plan</h4>
                            <ul class="space-y-2 text-sm">
                                <li><strong>Weeks 1-3:</strong> Focus on form</li>
                                <li><strong>Weeks 4-6:</strong> Increase reps</li>
                                <li><strong>Weeks 7+:</strong> Add 4th set or slow tempo</li>
                                <li><strong>Every 8-10 weeks:</strong> Swap exercises</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
        }

        function startWorkout() {
            isWorkoutActive = true;
            workoutStartTime = Date.now();
            startWorkoutBtn.classList.add('hidden');
            stopWorkoutBtn.classList.remove('hidden');
            timerDisplay.classList.remove('hidden');
            workoutProgress.classList.remove('hidden');
            
            // Start workout timer
            workoutTimer = setInterval(updateWorkoutTime, 1000);
            
            renderExercises();
            updateWorkoutProgress();
        }

        function stopWorkout() {
            isWorkoutActive = false;
            startWorkoutBtn.classList.remove('hidden');
            stopWorkoutBtn.classList.add('hidden');
            timerDisplay.classList.add('hidden');
            workoutProgress.classList.add('hidden');
            
            clearInterval(workoutTimer);
            stopTimer();
            
            renderExercises();
        }

        function resetProgress() {
            exerciseProgress = {};
            renderExercises();
            updateWorkoutProgress();
        }

        function completeSet(exerciseIndex) {
            if (!exerciseProgress[exerciseIndex]) {
                exerciseProgress[exerciseIndex] = { completedSets: 0, weight: 0 };
            }
            
            const exercises = getCurrentExercises();
            const maxSets = parseInt(exercises[exerciseIndex].sets) || 3;
            
            if (exerciseProgress[exerciseIndex].completedSets < maxSets) {
                exerciseProgress[exerciseIndex].completedSets++;
                renderExercises();
                updateWorkoutProgress();
                
                // Check if exercise is complete and advance to next
                if (exerciseProgress[exerciseIndex].completedSets >= maxSets) {
                    checkAndAdvanceExercise(exerciseIndex);
                }
                
                // Start rest timer automatically
                startTimer(75); // Default to 75 seconds
            }
        }

        function adjustWeight(exerciseIndex, change) {
            if (!exerciseProgress[exerciseIndex]) {
                const exercises = getCurrentExercises();
                exerciseProgress[exerciseIndex] = { 
                    completedSets: 0, 
                    weight: parseFloat(exercises[exerciseIndex].weight) || 0 
                };
            }
            
            exerciseProgress[exerciseIndex].weight = Math.max(0, exerciseProgress[exerciseIndex].weight + change);
            renderExercises();
        }

        function startTimer(seconds) {
            stopTimer(); // Stop any existing timer
            timerPaused = false;
            timerRemainingTime = seconds;
            document.getElementById('pauseTimer').textContent = 'Pause';
            document.getElementById('pauseTimer').className = 'bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition-all text-sm';
            
            currentTimerDuration = seconds;
            let timeLeft = seconds;
            const circle = document.getElementById('timerCircle');
            const text = document.getElementById('timerText');
            const circumference = 339.292;
            
            circle.style.strokeDashoffset = circumference;
            
            timerInterval = setInterval(() => {
                const progress = (seconds - timeLeft) / seconds;
                const offset = circumference - (progress * circumference);
                circle.style.strokeDashoffset = offset;
                
                const minutes = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                text.textContent = `${minutes}:${secs.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    stopTimer();
                    text.textContent = "Done!";
                    text.classList.add('pulse-gentle');
                    showTimerCompletion();
                    setTimeout(() => text.classList.remove('pulse-gentle'), 3000);
                }
                
                timeLeft--;
                timerRemainingTime = timeLeft;
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            timerPaused = false;
            timerRemainingTime = 0;
            document.getElementById('pauseTimer').textContent = 'Pause';
            document.getElementById('pauseTimer').className = 'bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition-all text-sm';
            
            const circle = document.getElementById('timerCircle');
            const text = document.getElementById('timerText');
            circle.style.strokeDashoffset = 339.292;
            text.textContent = "0:00";
        }

        function updateWorkoutTime() {
            if (!workoutStartTime) return;
            
            const elapsed = Math.floor((Date.now() - workoutStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            document.getElementById('workoutTime').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateWorkoutProgress() {
            const exercises = getCurrentExercises();
            let completedExercises = 0;
            let totalSets = 0;
            let completedSets = 0;
            let totalVolume = 0;
            let currentExerciseName = '-';
            
            exercises.forEach((exercise, index) => {
                const progress = exerciseProgress[index] || { completedSets: 0, weight: 0 };
                const maxSets = parseInt(exercise.sets) || 3;
                
                totalSets += maxSets;
                completedSets += progress.completedSets;
                
                if (progress.completedSets >= maxSets) {
                    completedExercises++;
                } else if (currentExerciseName === '-' && progress.completedSets < maxSets) {
                    currentExerciseName = exercise.name.split(' ')[0] + '...';
                }
                
                // Calculate volume (sets * reps * weight)
                const avgReps = parseInt(exercise.reps.split('-')[0]) || 8;
                totalVolume += progress.completedSets * avgReps * progress.weight;
            });
            
            const progressPercent = (completedExercises / exercises.length) * 100;
            
            document.getElementById('progressBar').style.width = `${progressPercent}%`;
            document.getElementById('progressText').textContent = `${completedExercises}/${exercises.length} exercises`;
            document.getElementById('completedSets').textContent = completedSets;
            document.getElementById('currentExercise').textContent = currentExerciseName;
            document.getElementById('totalVolume').textContent = Math.round(totalVolume);
        }

        function showExerciseDetails(index) {
            const exercises = getCurrentExercises();
            const exercise = exercises[index];
            
            document.getElementById('modalTitle').textContent = exercise.name;
            document.getElementById('modalContent').innerHTML = `
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Sets & Reps</h4>
                            <p class="text-2xl font-bold text-primary">${exercise.sets} √ó ${exercise.reps}</p>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Weight</h4>
                            <p class="text-2xl font-bold text-green-600">${exercise.weight}</p>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-2">Primary Muscles</h4>
                        <p class="text-gray-700 dark:text-gray-300">${exercise.focus}</p>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-2">How to Perform</h4>
                        <p class="text-gray-700 dark:text-gray-300">${exercise.description}</p>
                    </div>
                    
                    <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2 text-blue-800 dark:text-blue-300">üí° Tips</h4>
                        <ul class="text-sm text-blue-700 dark:text-blue-300 space-y-1">
                            <li>‚Ä¢ Focus on controlled movement and proper form</li>
                            <li>‚Ä¢ Breathe out during the exertion phase</li>
                            <li>‚Ä¢ If you can complete all reps easily, increase weight by 2.5-5lbs</li>
                        </ul>
                    </div>
                </div>
            `;
            
            exerciseModal.classList.remove('hidden');
        }

        function closeModal() {
            exerciseModal.classList.add('hidden');
        }

        // Close modal when clicking outside
        exerciseModal.addEventListener('click', (e) => {
            if (e.target === exerciseModal) {
                closeModal();
            }
        });

        // Timer state
        let timerPaused = false;
        let timerRemainingTime = 0;
        
        // New weight input functions
        function updateWeight(exerciseIndex, newWeight) {
            if (!exerciseProgress[exerciseIndex]) {
                exerciseProgress[exerciseIndex] = { completedSets: 0, weight: 0 };
            }
            exerciseProgress[exerciseIndex].weight = Math.max(0, parseFloat(newWeight) || 0);
            renderExercises();
        }
        
        function quickWeight(exerciseIndex, weight) {
            if (!exerciseProgress[exerciseIndex]) {
                exerciseProgress[exerciseIndex] = { completedSets: 0, weight: 0 };
            }
            exerciseProgress[exerciseIndex].weight = weight;
            document.getElementById(`weight-${exerciseIndex}`).value = weight;
            renderExercises();
        }
        
        // Enhanced timer functions
        function startCustomTimer() {
            const customInput = document.getElementById('customTimer');
            const seconds = parseInt(customInput.value);
            if (seconds && seconds > 0 && seconds <= 600) {
                startTimer(seconds);
                customInput.value = '';
            }
        }
        
        function pauseTimer() {
            if (timerInterval && !timerPaused) {
                // Pause the timer
                clearInterval(timerInterval);
                timerPaused = true;
                document.getElementById('pauseTimer').textContent = 'Resume';
                document.getElementById('pauseTimer').className = 'bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-all text-sm';
            } else if (timerPaused) {
                // Resume the timer
                resumeTimer();
            }
        }
        
        function resumeTimer() {
            if (timerPaused && timerRemainingTime > 0) {
                timerPaused = false;
                document.getElementById('pauseTimer').textContent = 'Pause';
                document.getElementById('pauseTimer').className = 'bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition-all text-sm';
                
                const circle = document.getElementById('timerCircle');
                const text = document.getElementById('timerText');
                const circumference = 339.292;
                let timeLeft = timerRemainingTime;
                
                timerInterval = setInterval(() => {
                    const progress = (currentTimerDuration - timeLeft) / currentTimerDuration;
                    const offset = circumference - (progress * circumference);
                    circle.style.strokeDashoffset = offset;
                    
                    const minutes = Math.floor(timeLeft / 60);
                    const secs = timeLeft % 60;
                    text.textContent = `${minutes}:${secs.toString().padStart(2, '0')}`;
                    
                    if (timeLeft <= 0) {
                        stopTimer();
                        text.textContent = "Done!";
                        text.classList.add('pulse-gentle');
                        showTimerCompletion();
                        setTimeout(() => text.classList.remove('pulse-gentle'), 3000);
                    }
                    
                    timeLeft--;
                    timerRemainingTime = timeLeft;
                }, 1000);
            }
        }
        
        function showTimerCompletion() {
            // Create a subtle notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-bounce';
            notification.textContent = '‚è∞ Rest time complete!';
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Auto-advance functionality
        function checkAndAdvanceExercise(completedIndex) {
            const exercises = getCurrentExercises();
            const progress = exerciseProgress[completedIndex];
            const maxSets = parseInt(exercises[completedIndex].sets) || 3;
            
            // Check if exercise is fully completed
            if (progress && progress.completedSets >= maxSets) {
                // Find next incomplete exercise
                for (let i = completedIndex + 1; i < exercises.length; i++) {
                    const nextProgress = exerciseProgress[i] || { completedSets: 0 };
                    const nextMaxSets = parseInt(exercises[i].sets) || 3;
                    
                    if (nextProgress.completedSets < nextMaxSets) {
                        // Scroll to next exercise
                        highlightNextExercise(i);
                        return;
                    }
                }
                
                // If no more exercises, show completion
                if (completedIndex === exercises.length - 1) {
                    showWorkoutCompletion();
                }
            }
        }
        
        function highlightNextExercise(index) {
            // Remove existing highlights
            document.querySelectorAll('.exercise-card').forEach(card => {
                card.classList.remove('ring-4', 'ring-blue-500', 'ring-opacity-50');
            });
            
            // Highlight next exercise
            const cards = document.querySelectorAll('.exercise-card');
            if (cards[index]) {
                cards[index].classList.add('ring-4', 'ring-blue-500', 'ring-opacity-50');
                cards[index].scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Remove highlight after 3 seconds
                setTimeout(() => {
                    cards[index].classList.remove('ring-4', 'ring-blue-500', 'ring-opacity-50');
                }, 3000);
            }
        }
        
        function showWorkoutCompletion() {
            const notification = document.createElement('div');
            notification.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            notification.innerHTML = `
                <div class="bg-white dark:bg-gray-800 rounded-lg p-8 max-w-md mx-4 text-center">
                    <div class="text-6xl mb-4">üéâ</div>
                    <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Workout Complete!</h2>
                    <p class="text-gray-600 dark:text-gray-400 mb-6">Great job finishing your workout session!</p>
                    <button onclick="this.closest('.fixed').remove()" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark transition-all">
                        Close
                    </button>
                </div>
            `;
            document.body.appendChild(notification);
        }

        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'dumbbell-tracker-v1';
                    const urlsToCache = [
                        './',
                        'https://cdn.tailwindcss.com',
                        'https://unpkg.com/feather-icons'
                    ];

                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });

                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    if (response) {
                                        return response;
                                    }
                                    return fetch(event.request);
                                })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then((registration) => {
                        console.log('Service Worker registered successfully');
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed');
                    });
            });
        }

        // Initialize app
        selectProgram('program1');
    </script>
</body>
</html>
